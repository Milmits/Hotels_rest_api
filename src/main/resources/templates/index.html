<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Система бронирования</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
  <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
  <style>
    body { font-family: Arial, sans-serif; margin: 0; padding: 0; }
    .container { display: flex; }
    .sidebar { width: 250px; background: #333; color: white; height: 100vh; padding: 15px; }
    .sidebar a { color: white; display: block; padding: 10px; text-decoration: none; }
    .sidebar a:hover { background: #555; }
    .content { flex: 1; padding: 20px; }
    .hidden { display: none; }
    input, select, button { display: block; margin: 10px 0; padding: 10px; width: 100%; }
    table { width: 100%; border-collapse: collapse; margin-top: 20px; }
    th, td { border: 1px solid #ddd; padding: 8px; text-align: left; }
    th { background-color: #f4f4f4; }
  </style>
</head>
<body>
<div class="container">
  <nav class="sidebar">
    <a href="#" onclick="showPage('bookings')">Бронирования</a>
    <a href="#" onclick="showPage('rooms')">Номера</a>
    <a href="#" onclick="showPage('clients')">Клиенты</a>
    <a href="#" onclick="showPage('discounts')">Скидки</a>
    <a href="#" onclick="showPage('reports')">Отчеты</a>
    <a href="#" onclick="showPage('settings')">Настройки</a>
    <a href="#" onclick="showPage('hotels')">Отели</a> <!-- Новый пункт меню -->
  </nav>
  <main class="content">
    <section id="bookings">
      <h2>Главное окно бронирований</h2>
      <input type="text" id="search" placeholder="Поиск по клиенту, дате или номеру">
      <select id="statusFilter">
        <option value="all">Все</option>
        <option value="active">Активные</option>
        <option value="canceled">Отмененные</option>
        <option value="completed">Завершенные</option>
      </select>
      <button onclick="loadBookings()">Обновить список</button>
      <table id="bookingsTable">
        <tr>
          <th>Клиент</th>
          <th>Дата заезда</th>
          <th>Дата выезда</th>
          <th>Статус</th>
          <th>Действия</th>
        </tr>
      </table>
    </section>

    <!-- Новый раздел для отелей -->
    <section id="hotels" class="hidden">
      <h2>Список отелей</h2>
      <button onclick="loadHotels()" class="btn btn-primary">Обновить список</button>
      <div id="hotelsList"></div>
    </section>
    ...
    <!-- Раздел "Номера" -->
    <section id="rooms" class="hidden">
      <h2>Список номеров</h2>
      <table>
        <tr>
          <th>Номер</th>
          <th>Категория</th>
          <th>Статус</th>
        </tr>
        <tr>
          <td>101</td>
          <td>Стандарт</td>
          <td>Свободен</td>
        </tr>
        <tr>
          <td>202</td>
          <td>Люкс</td>
          <td>Занят</td>
        </tr>
      </table>
    </section>

    <!-- Раздел "Клиенты" -->
    <section id="clients" class="hidden">
      <h2>Список клиентов</h2>
      <table>
        <tr>
          <th>Имя</th>
          <th>Телефон</th>
          <th>Email</th>
        </tr>
        <tr>
          <td>Иван Иванов</td>
          <td>+7 900 123-45-67</td>
          <td>ivan@example.com</td>
        </tr>
        <tr>
          <td>Анна Петрова</td>
          <td>+7 911 654-32-10</td>
          <td>anna@example.com</td>
        </tr>
      </table>
    </section>

    <!-- Раздел "Скидки" -->
    <section id="discounts" class="hidden">
      <h2>Скидки</h2>
      <table>
        <tr>
          <th>Название</th>
          <th>Процент</th>
          <th>Условия</th>
        </tr>
        <tr>
          <td>Раннее бронирование</td>
          <td>10%</td>
          <td>За 30 дней до заезда</td>
        </tr>
        <tr>
          <td>Постоянный клиент</td>
          <td>15%</td>
          <td>От 5 бронирований</td>
        </tr>
      </table>
    </section>

    <!-- Раздел "Отчеты" -->
    <section id="reports" class="hidden">
      <h2>Отчеты</h2>
      <p>Выберите отчет для просмотра:</p>
      <ul>
        <li><a href="#">Загрузка отеля</a></li>
        <li><a href="#">История бронирований</a></li>
        <li><a href="#">Финансовый отчет</a></li>
      </ul>
    </section>

    <!-- Раздел "Настройки" -->
    <section id="settings" class="hidden">
      <h2>Настройки</h2>
      <form>
        <label>Имя пользователя:</label>
        <input type="text" placeholder="Введите имя">
        <label>Email:</label>
        <input type="email" placeholder="Введите email">
        <label>Пароль:</label>
        <input type="password" placeholder="Введите пароль">
        <button type="submit">Сохранить</button>
      </form>
    </section>
    ...

  </main>
</div>

<script>
  // Функция для переключения между разделами
  function showPage(pageId) {
    document.querySelectorAll('section').forEach(section => {
        section.classList.add('hidden');
    });
    document.getElementById(pageId).classList.remove('hidden');
  }

  // Загрузка бронирований
  function loadBookings() {
    axios.get("http://localhost:9090/api/bookings")
      .then(response => {
        let bookings = response.data;
        let bookingsTable = document.getElementById("bookingsTable");
        bookingsTable.innerHTML = `
          <tr>
            <th>Клиент</th>
            <th>Дата заезда</th>
            <th>Дата выезда</th>
            <th>Статус</th>
            <th>Действия</th>
          </tr>`;

        bookings.forEach(booking => {
          bookingsTable.innerHTML += `
            <tr>
              <td>${booking.customerName}</td>
              <td>${booking.checkInDate}</td>
              <td>${booking.checkOutDate}</td>
              <td>${booking.status}</td>
              <td>
                <button onclick="cancelBooking(${booking.id})" class="btn btn-danger">Отменить</button>
              </td>
            </tr>`;
        });
      })
      .catch(error => console.error("Ошибка загрузки бронирований:", error));
  }

  // Отмена бронирования
  function cancelBooking(id) {
    axios.delete(`http://localhost:9090/api/bookings/${id}/cancel?reason=Отмена пользователем`)
      .then(() => {
        alert("Бронирование отменено");
        loadBookings();
      })
      .catch(error => alert("Ошибка отмены: " + error.response.data));
  }

  // Загрузка списка отелей
  function loadHotels() {
    axios.get("http://localhost:8080/property-view/hotels")
      .then(response => {
        let hotels = response.data;
        let hotelsList = document.getElementById("hotelsList");
        hotelsList.innerHTML = "";

        hotels.forEach(hotel => {
          hotelsList.innerHTML += `
            <div class="card p-3 mb-3">
              <h4>${hotel.name}</h4>
              <p>${hotel.city}, ${hotel.street}</p>
              <a href="hotel.html?id=${hotel.id}" class="btn btn-info">Подробнее</a>
            </div>`;
        });
      })
      .catch(error => console.error("Ошибка загрузки отелей:", error));
  }

  // Инициализация загрузки данных
  window.onload = function() {
    loadBookings();  // Загружаем бронирования по умолчанию
    loadHotels();    // Загружаем отели при старте
  };
</script>
</body>
</html>


